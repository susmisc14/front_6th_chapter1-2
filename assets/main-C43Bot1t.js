(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function a(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(o){if(o.ep)return;o.ep=!0;const n=a(o);fetch(o.href,n)}})();const de="modulepreload",ue=function(e){return"/front_6th_chapter1-2/"+e},V={},me=function(r,a,s){let o=Promise.resolve();if(a&&a.length>0){let l=function(u){return Promise.all(u.map(x=>Promise.resolve(x).then(N=>({status:"fulfilled",value:N}),N=>({status:"rejected",reason:N}))))};var c=l;document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),i=d?.nonce||d?.getAttribute("nonce");o=l(a.map(u=>{if(u=ue(u),u in V)return;V[u]=!0;const x=u.endsWith(".css"),N=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${N}`))return;const S=document.createElement("link");if(S.rel=x?"stylesheet":de,x||(S.as="script"),S.crossOrigin="",S.href=u,i&&S.setAttribute("nonce",i),document.head.appendChild(S),x)return new Promise((C,f)=>{S.addEventListener("load",C),S.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${u}`)))})}))}function n(d){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=d,window.dispatchEvent(i),!i.defaultPrevented)throw d}return o.then(d=>{for(const i of d||[])i.status==="rejected"&&n(i.reason);return r().catch(n)})},q="/front_6th_chapter1-2/",O=new WeakMap,D=new Set;function ge(e){D.forEach(r=>{e.addEventListener(r,pe)})}function te(e,r,a){D.has(r)||D.add(r);const s=O.get(e)||[];s.push({eventType:r,handler:a}),O.set(e,s)}function z(e,r,a){const s=O.get(e);if(!s)return;const o=s.filter(n=>n.eventType!==r||n.handler!==a);o.length===0?O.delete(e):O.set(e,o)}function pe(e){let r=e.target;for(;r&&r instanceof Element;)(O.get(r)||[]).filter(a=>a.eventType===e.type).forEach(a=>a.handler(e)),r=r.parentElement}function _(e){if(e==null||typeof e=="boolean")return document.createTextNode("");if(typeof e=="string"||typeof e=="number")return document.createTextNode(e.toString());if(Array.isArray(e)){const n=document.createDocumentFragment();return e.forEach(c=>n.appendChild(_(c))),n}if(typeof e.type=="function")throw new Error("컴포넌트는 `createElement()`로 처리할 수 없습니다.");const{type:r,props:a,children:s}=e,o=document.createElement(r);return ye(o,a),o.append(...s.map(_)),o}function ye(e,r){if(r){for(const[a,s]of Object.entries(r))if(a!=="children")if(a.startsWith("on")){const o=a.slice(2).toLowerCase();te(e,o,s)}else a==="className"?e.setAttribute("class",s):a==="style"&&typeof s=="object"?Object.entries(s).forEach(([o,n])=>{e.style[o]=n}):typeof s=="boolean"?s&&(e[a]=!0):e.setAttribute(a,s)}}const re=()=>{const e=new Set;return{subscribe:s=>e.add(s),notify:()=>e.forEach(s=>s())}},fe=(e,r=window.localStorage)=>({get:()=>{try{const n=r.getItem(e);return n?JSON.parse(n):null}catch(n){return console.error(`Error parsing storage item for key "${e}":`,n),null}},set:n=>{try{r.setItem(e,JSON.stringify(n))}catch(c){console.error(`Error setting storage item for key "${e}":`,c)}},reset:()=>{try{r.removeItem(e)}catch(n){console.error(`Error removing storage item for key "${e}":`,n)}}}),j=(e,r)=>{const{subscribe:a,notify:s}=re();let o=r;return{getState:()=>o,dispatch:d=>{const i=e(o,d);i!==o&&(o=i,s())},subscribe:a}};function t(e,r,...a){return{type:e,props:r,children:a.flat(1/0).filter(s=>!!s||s===0)}}function M(e){return e==null||typeof e=="boolean"?"":typeof e=="string"||typeof e=="number"?String(e):typeof e.type=="function"?M(e.type({...e.props,children:e.children})):{...e,children:e.children.map(M).filter(Boolean)}}function ae(e,r,a,s=0){const o=e.childNodes[s];if(!r&&a){o&&e.removeChild(o);return}if(r&&!a){e.appendChild(_(r));return}if(typeof r=="string"||typeof r=="number"){if(r!==a){const n=document.createTextNode(String(r));o?e.replaceChild(n,o):e.appendChild(n)}return}if(Y(r)&&Y(a)){if(r.type!==a.type){o?e.replaceChild(_(r),o):e.appendChild(_(r));return}if(o){he(o,r.props,a.props);const n=r.children,c=a.children,d=Math.max(n.length,c.length);for(let i=0;i<d;i++)ae(o,n[i],c[i],i);if(c.length>n.length)for(let i=c.length-1;i>=n.length;i--){const l=o.childNodes[i];l&&o.removeChild(l)}}}}function he(e,r,a){const s=r||{},o=a||{};for(const n in o)if(!(n in s))if(n.startsWith("on")&&typeof o[n]=="function"){const c=n.toLowerCase().slice(2);z(e,c,o[n])}else n==="className"?e.removeAttribute("class"):e.removeAttribute(n);for(const n in s)if(o[n]!==s[n])if(n.startsWith("on")&&typeof s[n]=="function"){const c=n.toLowerCase().slice(2);typeof o[n]=="function"&&z(e,c,o[n]),te(e,c,s[n])}else n==="className"?e.className=s[n]:n==="style"&&typeof s[n]=="object"?Object.assign(e.style,s[n]):typeof s[n]=="boolean"?e[n]=s[n]:e.setAttribute(n,s[n])}function Y(e){return typeof e=="object"&&e!=null}let J=null;function be(e,r){const a=M(e);r.firstChild?ae(r,a,J):r.appendChild(_(a)),J=a,ge(r)}class A{#a;#e;#r=re();#t;constructor(r=""){this.#a=new Map,this.#e=null,this.#t=r.replace(/\/$/,""),window.addEventListener("popstate",()=>{this.#e=this.#s(),this.#r.notify()}),document.addEventListener("click",a=>{if(a.target.closest("[data-link]")){a.preventDefault();const s=a.target.getAttribute("href")||a.target.closest("[data-link]").getAttribute("href");s&&this.push(s)}})}get baseUrl(){return this.#t}get query(){return A.parseQuery(window.location.search)}set query(r){const a=A.getUrl(r,this.#t);this.push(a)}get params(){return this.#e?.params??{}}get route(){return this.#e}get target(){return this.#e?.handler}subscribe(r){this.#r.subscribe(r)}addRoute(r,a){const s=[],o=r.replace(/:\w+/g,c=>(s.push(c.slice(1)),"([^/]+)")).replace(/\//g,"\\/"),n=new RegExp(`^${this.#t}${o}$`);this.#a.set(r,{regex:n,paramNames:s,handler:a})}#s(r=window.location.pathname){const{pathname:a}=new URL(r,window.location.origin);for(const[s,o]of this.#a){const n=a.match(o.regex);if(n){const c={};return o.paramNames.forEach((d,i)=>{c[d]=n[i+1]}),{...o,params:c,path:s}}}return null}push(r){try{let a=r.startsWith(this.#t)?r:this.#t+(r.startsWith("/")?r:"/"+r);`${window.location.pathname}${window.location.search}`!==a&&window.history.pushState(null,"",a),this.#e=this.#s(a),this.#r.notify()}catch(a){console.error("라우터 네비게이션 오류:",a)}}start(){this.#e=this.#s(),this.#r.notify()}static parseQuery=(r=window.location.search)=>{const a=new URLSearchParams(r),s={};for(const[o,n]of a)s[o]=n;return s};static stringifyQuery=r=>{const a=new URLSearchParams;for(const[s,o]of Object.entries(r))o!=null&&o!==""&&a.set(s,String(o));return a.toString()};static getUrl=(r,a="")=>{const o={...A.parseQuery(),...r};Object.keys(o).forEach(c=>{(o[c]===null||o[c]===void 0||o[c]==="")&&delete o[c]});const n=A.stringifyQuery(o);return`${a}${window.location.pathname.replace(a,"")}${n?`?${n}`:""}`}}async function $(e={}){const{limit:r=20,search:a="",category1:s="",category2:o="",sort:n="price_asc"}=e,c=e.current??e.page??1,d=new URLSearchParams({page:c.toString(),limit:r.toString(),...a&&{search:a},...s&&{category1:s},...o&&{category2:o},sort:n});return await(await fetch(`/api/products?${d}`)).json()}async function xe(e){return await(await fetch(`/api/products/${e}`)).json()}async function ve(){return await(await fetch("/api/categories")).json()}const p={SET_PRODUCTS:"products/setProducts",ADD_PRODUCTS:"products/addProducts",SET_LOADING:"products/setLoading",SET_ERROR:"products/setError",SET_CATEGORIES:"products/setCategories",SET_CURRENT_PRODUCT:"products/setCurrentProduct",SET_RELATED_PRODUCTS:"products/setRelatedProducts",RESET_FILTERS:"products/resetFilters",SETUP:"products/setup",SET_STATUS:"products/setStatus"},h={ADD_ITEM:"cart/addItem",REMOVE_ITEM:"cart/removeItem",UPDATE_QUANTITY:"cart/updateQuantity",CLEAR_CART:"cart/clearCart",TOGGLE_SELECT:"cart/toggleSelect",SELECT_ALL:"cart/selectAll",DESELECT_ALL:"cart/deselectAll",REMOVE_SELECTED:"cart/removeSelected",LOAD_FROM_STORAGE:"cart/loadFromStorage",SYNC_TO_STORAGE:"cart/syncToStorage"},b={OPEN_CART_MODAL:"ui/openCartModal",CLOSE_CART_MODAL:"ui/closeCartModal",SHOW_TOAST:"ui/showToast",HIDE_TOAST:"ui/hideToast"},H={products:[],totalCount:0,currentProduct:null,relatedProducts:[],loading:!0,error:null,status:"idle",categories:{}},we=(e,r)=>{switch(r.type){case p.SET_STATUS:return{...e,status:r.payload};case p.SET_CATEGORIES:return{...e,categories:r.payload,loading:!1,error:null,status:"done"};case p.SET_PRODUCTS:return{...e,products:r.payload.products,totalCount:r.payload.totalCount,loading:!1,error:null,status:"done"};case p.ADD_PRODUCTS:return{...e,products:[...e.products,...r.payload.products],totalCount:r.payload.totalCount,loading:!1,error:null,status:"done"};case p.SET_LOADING:return{...e,loading:r.payload};case p.SET_ERROR:return{...e,error:r.payload,loading:!1,status:"done"};case p.SET_CURRENT_PRODUCT:return{...e,currentProduct:r.payload,loading:!1,error:null,status:"done"};case p.SET_RELATED_PRODUCTS:return{...e,relatedProducts:r.payload,status:"done"};case p.SETUP:return{...e,...r.payload};default:return e}},y=j(we,H),Q=fe("shopping_cart"),se={items:[],selectedAll:!1},Ne=(e,r)=>e.find(a=>a.id===r),Se=(e,r)=>{const a=Q.get()??se;switch(r.type){case h.ADD_ITEM:{const{product:s,quantity:o=1}=r.payload;if(Ne(a.items,s.productId))return{...a,items:a.items.map(c=>c.id===s.productId?{...c,quantity:c.quantity+o}:c)};{const c={id:s.productId,title:s.title,image:s.image,price:parseInt(s.lprice),quantity:o,selected:!1};return{...a,items:[...a.items,c]}}}case h.REMOVE_ITEM:return{...a,items:a.items.filter(s=>s.id!==r.payload)};case h.UPDATE_QUANTITY:{const{productId:s,quantity:o}=r.payload;return{...a,items:a.items.map(n=>n.id===s?{...n,quantity:Math.max(1,o)}:n)}}case h.CLEAR_CART:return{...a,items:[],selectedAll:!1};case h.TOGGLE_SELECT:{const s=r.payload,o=a.items.map(c=>c.id===s?{...c,selected:!c.selected}:c),n=o.length>0&&o.every(c=>c.selected);return{...a,items:o,selectedAll:n}}case h.SELECT_ALL:{const s=a.items.map(o=>({...o,selected:!0}));return{...a,items:s,selectedAll:!0}}case h.DESELECT_ALL:{const s=a.items.map(o=>({...o,selected:!1}));return{...a,items:s,selectedAll:!1}}case h.REMOVE_SELECTED:return{...a,items:a.items.filter(s=>!s.selected),selectedAll:!1};case h.LOAD_FROM_STORAGE:return{...a,...r.payload};default:return a}},w=j(Se,se),Ee={cartModal:{isOpen:!1},globalLoading:!1,toast:{isVisible:!1,message:"",type:"info"}},Ce=(e,r)=>{switch(r.type){case b.OPEN_CART_MODAL:return{...e,cartModal:{isOpen:!0}};case b.CLOSE_CART_MODAL:return{...e,cartModal:{isOpen:!1}};case b.HIDE_TOAST:return{...e,toast:{...e.toast,isVisible:!1}};case b.SHOW_TOAST:return{...e,toast:{isVisible:!0,message:r.payload.message,type:r.payload.type||"info"}};default:return e}},v=j(Ce,Ee),m=new A(q),I=new WeakMap,T={current:null,previous:null},Te={mount:null,unmount:null,watches:[],deps:[],mounted:!1},W=e=>(I.has(e)||I.set(e,{...Te}),I.get(e)),Ae=(e,r)=>!Array.isArray(e)||!Array.isArray(r)?!1:e.length!==r.length?!0:e.some((a,s)=>a!==r[s]),Oe=e=>{const r=W(e);r.mounted||(console.log("🚀 페이지 마운트:",e.name),r.mount?.(),r.mounted=!0,r.deps=[])},_e=e=>{const r=W(e);r.mounted&&(console.log("🔻 페이지 언마운트:",e.name),r.unmount?.(),r.mounted=!1)},oe=({onMount:e,onUnmount:r,watches:a}={},s)=>{const o=W(s);return typeof e=="function"&&(o.mount=e),typeof r=="function"&&(o.unmount=r),Array.isArray(a)&&(o.watches=typeof a[0]=="function"?[a]:a),(...n)=>{const c=T.current!==s;return T.current&&c&&_e(T.current),T.previous=T.current,T.current=s,c?Oe(s):o.watches&&o.watches.forEach(([d,i],l)=>{const u=d();Ae(u,o.deps[l])&&(console.log(`📊 의존성 변경 감지 (${s.name}):`,o.deps[l],"→",u),i()),o.deps[l]=Array.isArray(u)?[...u]:[]}),s(...n)}},Le=async()=>{m.query={current:void 0},y.dispatch({type:p.SETUP,payload:{...H,loading:!0,status:"pending"}});try{const[{products:e,pagination:{total:r}},a]=await Promise.all([$(m.query),ve()]);y.dispatch({type:p.SETUP,payload:{products:e,categories:a,totalCount:r,loading:!1,status:"done"}})}catch(e){throw y.dispatch({type:p.SET_ERROR,payload:e.message}),e}},F=async(e=!0)=>{try{y.dispatch({type:p.SETUP,payload:{loading:!0,status:"pending",error:null}});const{products:r,pagination:{total:a}}=await $(m.query),s={products:r,totalCount:a};if(e){y.dispatch({type:p.SET_PRODUCTS,payload:s});return}y.dispatch({type:p.ADD_PRODUCTS,payload:s})}catch(r){throw y.dispatch({type:p.SET_ERROR,payload:r.message}),r}},Re=async()=>{const e=y.getState();!(e.products.length<e.totalCount)||e.loading||(m.query={current:Number(m.query.current??1)+1},await F(!1))},ke=e=>{m.query={search:e,current:1}},k=e=>{m.query={...e,current:1}},Pe=e=>{m.query={sort:e,current:1}},Ie=e=>{m.query={limit:e,current:1}},K=async e=>{try{const r=y.getState().currentProduct;if(e===r?.productId){r.category2&&await X(r.category2,e);return}y.dispatch({type:p.SETUP,payload:{...H,currentProduct:null,loading:!0,status:"pending"}});const a=await xe(e);y.dispatch({type:p.SET_CURRENT_PRODUCT,payload:a}),a.category2&&await X(a.category2,e)}catch(r){throw console.error("상품 상세 페이지 로드 실패:",r),y.dispatch({type:p.SET_ERROR,payload:r.message}),r}},X=async(e,r)=>{try{const o=(await $({category2:e,limit:20,page:1})).products.filter(n=>n.productId!==r);y.dispatch({type:p.SET_RELATED_PRODUCTS,payload:o})}catch(a){console.error("관련 상품 로드 실패:",a),y.dispatch({type:p.SET_RELATED_PRODUCTS,payload:[]})}},De=()=>{try{const e=Q.get();e&&w.dispatch({type:h.LOAD_FROM_STORAGE,payload:e})}catch(e){console.error("장바구니 로드 실패:",e)}},E=()=>{try{const e=w.getState();Q.set(e)}catch(e){console.error("장바구니 저장 실패:",e)}},ne=(e,r=1)=>{w.dispatch({type:h.ADD_ITEM,payload:{product:e,quantity:r}}),E(),v.dispatch({type:b.SHOW_TOAST,payload:{message:"장바구니에 추가되었습니다",type:"success"}}),setTimeout(()=>{v.dispatch({type:b.HIDE_TOAST})},3e3)},Me=e=>{w.dispatch({type:h.REMOVE_ITEM,payload:e}),E()},B=(e,r)=>{w.dispatch({type:h.UPDATE_QUANTITY,payload:{productId:e,quantity:r}}),E()},Ue=e=>{w.dispatch({type:h.TOGGLE_SELECT,payload:e}),E()},qe=()=>{w.dispatch({type:h.SELECT_ALL}),E()},je=()=>{w.dispatch({type:h.DESELECT_ALL}),E()},$e=()=>{w.dispatch({type:h.REMOVE_SELECTED}),E(),v.dispatch({type:b.SHOW_TOAST,payload:{message:"선택된 상품들이 삭제되었습니다",type:"info"}}),setTimeout(()=>{v.dispatch({type:b.HIDE_TOAST})},3e3)},He=()=>{w.dispatch({type:h.CLEAR_CART}),E(),v.dispatch({type:b.SHOW_TOAST,payload:{message:"장바구니가 비워졌습니다",type:"info"}}),setTimeout(()=>{v.dispatch({type:b.HIDE_TOAST})},3e3)},g=({src:e,...r})=>{const a=String(q+e).replace("//","/");return t("img",{src:a,...r})},Qe=[10,20,50,100],We=[{value:"price_asc",label:"가격 낮은순"},{value:"price_desc",label:"가격 높은순"},{value:"name_asc",label:"이름순"},{value:"name_desc",label:"이름 역순"}],Fe=async e=>{if(e.key==="Enter"){const r=e.target.value.trim();try{await ke(r)}catch(a){console.error("검색 실패:",a)}}},Be=async e=>{const r=parseInt(e.target.value);try{await Ie(r)}catch(a){console.error("상품 수 변경 실패:",a)}},Ge=async e=>{const r=e.target.value;try{await Pe(r)}catch(a){console.error("정렬 변경 실패:",a)}},Z=async e=>{const r=e.target.getAttribute("data-breadcrumb");try{if(r==="reset")await k({category1:"",category2:""});else if(r==="category1"){const a=e.target.getAttribute("data-category1");await k({category1:a,category2:""})}}catch(a){console.error("브레드크럼 네비게이션 실패:",a)}},Ve=async e=>{const r=e.target.getAttribute("data-category1");if(r)try{await k({category1:r,category2:""})}catch(a){console.error("1depth 카테고리 선택 실패:",a)}},ze=async e=>{const r=e.target.getAttribute("data-category1"),a=e.target.getAttribute("data-category2");if(!(!r||!a))try{await k({category1:r,category2:a})}catch(s){console.error("2depth 카테고리 선택 실패:",s)}};function Ye({searchQuery:e="",limit:r=20,sort:a="price_asc",category:s={},categories:o={}}){const n=Object.keys(o).length>0?Object.keys(o):[],c=Qe.map(l=>t("option",{key:l,value:l,selected:Number(r)===l},l,"개")),d=We.map(({value:l,label:u})=>t("option",{key:l,value:l,selected:a===l},u)),i=n.map(l=>t("button",{key:l,"data-category1":l,className:`category1-filter-btn text-left px-3 py-2 text-sm rounded-md border transition-colors
                 bg-white border-gray-300 text-gray-700 hover:bg-gray-50`,onClick:Ve},l));return t("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-4"},t("div",{className:"mb-4"},t("div",{className:"relative"},t("input",{type:"text",id:"search-input",placeholder:"상품명을 검색해보세요...",value:e,className:`w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg
                        focus:ring-2 focus:ring-blue-500 focus:border-blue-500`,onKeyDown:Fe}),t("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},t(g,{src:"/search-icon.svg",alt:"검색",className:"h-5 w-5 text-gray-400"})))),t("div",{className:"space-y-3"},t("div",{className:"space-y-2"},t("div",{className:"flex items-center gap-2"},t("label",{className:"text-sm text-gray-600"},"카테고리:"),["전체",s.category1,s.category2].filter((l,u)=>u===0||!!l).map((l,u)=>{if(l==="전체")return t("button",{key:"reset","data-breadcrumb":"reset",className:"text-xs hover:text-blue-800 hover:underline",onClick:Z},"전체");if(u===1)return t("button",{key:l,"data-breadcrumb":"category1","data-category1":l,className:"text-xs hover:text-blue-800 hover:underline",onClick:Z},l);if(u===2)return t("span",{key:l,className:"text-xs text-gray-600 cursor-default"},l)}).reduce((l,u,x)=>(x>0&&l.push(t("span",{className:"text-xs text-gray-500"},">")),l.push(u),l),[])),!s.category1&&t("div",{className:"flex flex-wrap gap-2"},n.length>0?i:t("div",{className:"text-sm text-gray-500 italic"},"카테고리 로딩 중...")),s.category1&&o[s.category1]&&t("div",{className:"space-y-2"},t("div",{className:"flex flex-wrap gap-2"},Object.keys(o[s.category1]).map(l=>{const u=s.category2===l;return t("button",{key:l,"data-category1":s.category1,"data-category2":l,className:`category2-filter-btn text-left px-3 py-2 text-sm rounded-md border transition-colors
                               ${u?"bg-blue-100 border-blue-300 text-blue-800":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,onClick:ze},l)})))),t("div",{className:"flex gap-2 items-center justify-between"},t("div",{className:"flex items-center gap-2"},t("label",{className:"text-sm text-gray-600"},"개수:"),t("select",{id:"limit-select",className:"text-sm border border-gray-300 rounded px-2 py-1 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",onChange:Be},c)),t("div",{className:"flex items-center gap-2"},t("label",{className:"text-sm text-gray-600"},"정렬:"),t("select",{id:"sort-select",className:`text-sm border border-gray-300 rounded px-2 py-1
                           focus:ring-1 focus:ring-blue-500 focus:border-blue-500`,onChange:Ge},d)))))}const Je=e=>{const r=e.target.closest("[data-product-id]"),a=r.getAttribute("data-product-id"),s=r.previousElementSibling;if(a&&s){const o=parseInt(s.value)+1;s.value=o,B(a,o)}},Ke=e=>{const r=e.target.closest("[data-product-id]"),a=r.getAttribute("data-product-id"),s=r.nextElementSibling;if(a&&s){const o=Math.max(1,parseInt(s.value)-1);s.value=o,B(a,o)}},Xe=(e,r)=>{const a=Math.max(1,parseInt(r)||1);e&&B(e,a)};function Ze({id:e,title:r,image:a,price:s,quantity:o,selected:n}){const c=s*o;return t("div",{className:"flex items-center py-3 border-b border-gray-100 cart-item","data-product-id":e},t("label",{className:"flex items-center mr-3"},t("input",{type:"checkbox",checked:n,className:`cart-item-checkbox w-4 h-4 text-blue-600 border-gray-300 rounded
                      focus:ring-blue-500`,"data-product-id":e,onChange:()=>Ue(e)})),t("div",{className:"w-16 h-16 bg-gray-100 rounded-lg overflow-hidden mr-3 flex-shrink-0"},t("img",{src:a,alt:r,className:"w-full h-full object-cover cursor-pointer cart-item-image","data-product-id":e})),t("div",{className:"flex-1 min-w-0"},t("h4",{className:"text-sm font-medium text-gray-900 truncate cursor-pointer cart-item-title","data-product-id":e},r),t("p",{className:"text-sm text-gray-600 mt-1"},s.toLocaleString(),"원"),t("div",{className:"flex items-center mt-2"},t("button",{className:`quantity-decrease-btn w-7 h-7 flex items-center justify-center
                         border border-gray-300 rounded-l-md bg-gray-50 hover:bg-gray-100`,"data-product-id":e,onClick:Ke},t(g,{src:"/minus-icon.svg",alt:"감소",className:"w-3 h-3"})),t("input",{type:"number",value:o,min:"1",className:`quantity-input w-12 h-7 text-center text-sm border-t border-b
                        border-gray-300 focus:ring-1 focus:ring-blue-500 focus:border-blue-500`,disabled:!0,"data-product-id":e,onChange:d=>Xe(e,d.target.value)}),t("button",{className:`quantity-increase-btn w-7 h-7 flex items-center justify-center
                         border border-gray-300 rounded-r-md bg-gray-50 hover:bg-gray-100`,"data-product-id":e,onClick:Je},t(g,{src:"/plus-icon.svg",alt:"증가",className:"w-3 h-3"})))),t("div",{className:"text-right ml-3"},t("p",{className:"text-sm font-medium text-gray-900"},c.toLocaleString(),"원"),t("button",{className:"cart-item-remove-btn mt-1 text-xs text-red-600 hover:text-red-800","data-product-id":e,onClick:()=>Me(e)},"삭제")))}const ee=()=>{v.dispatch({type:b.CLOSE_CART_MODAL})},et=e=>{e.target.checked?qe():je()},tt=()=>{v.dispatch({type:b.SHOW_TOAST,payload:{message:"구매 기능은 추후 구현 예정입니다.",type:"info"}})};let U=!1;const ce=e=>{e.key==="Escape"&&(v.getState().cartModal.isOpen&&v.dispatch({type:b.CLOSE_CART_MODAL}),document.removeEventListener("keydown",ce),U=!1)},rt=()=>{U||(document.addEventListener("keydown",ce),U=!0)};function at({items:e=[],selectedAll:r=!1,isOpen:a=!1}){if(rt(),!a)return"";const s=e.filter(d=>d.selected),o=s.length,n=e.reduce((d,i)=>d+i.price*i.quantity,0),c=s.reduce((d,i)=>d+i.price*i.quantity,0);return t("div",{className:"fixed inset-0 z-50 overflow-y-auto cart-modal"},t("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity cart-modal-overlay",onClick:ee}),t("div",{className:"flex min-h-full items-end justify-center p-0 sm:items-center sm:p-4"},t("div",{className:"relative bg-white rounded-t-lg sm:rounded-lg shadow-xl w-full max-w-md sm:max-w-lg max-h-[90vh] overflow-hidden"},t("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-4 flex items-center justify-between"},t("h2",{className:"text-lg font-bold text-gray-900 flex items-center"},t(g,{src:"/cart-icon.svg",alt:"장바구니",className:"w-5 h-5 mr-2"}),"장바구니",e.length>0&&t("span",{className:"text-sm font-normal text-gray-600 ml-1"},"(",e.length,")")),t("button",{id:"cart-modal-close-btn",className:"text-gray-400 hover:text-gray-600 p-1",onClick:ee},t(g,{src:"/close-icon.svg",alt:"닫기",className:"w-6 h-6"}))),e.length===0?t("div",{className:"flex-1 flex items-center justify-center p-8"},t("div",{className:"text-center"},t("div",{className:"text-gray-400 mb-4"},t(g,{src:"/empty-cart-icon.svg",alt:"빈 장바구니",className:"mx-auto h-12 w-12"})),t("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"장바구니가 비어있습니다"),t("p",{className:"text-gray-600"},"원하는 상품을 담아보세요!"))):t("div",{className:"flex flex-col max-h-[calc(90vh-120px)]"},t("div",{className:"p-4 border-b border-gray-200 bg-gray-50"},t("label",{className:"flex items-center text-sm text-gray-700"},t("input",{type:"checkbox",id:"cart-modal-select-all-checkbox",checked:r,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 mr-2",onChange:et}),"전체선택 (",e.length,"개)")),t("div",{className:"flex-1 overflow-y-auto"},t("div",{className:"p-4 space-y-4"},e.map(d=>t(Ze,{...d}))))),e.length>0&&t("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 p-4"},o>0&&t("div",{className:"flex justify-between items-center mb-3 text-sm"},t("span",{className:"text-gray-600"},"선택한 상품 (",o,"개)"),t("span",{className:"font-medium"},c.toLocaleString(),"원")),t("div",{className:"flex justify-between items-center mb-4"},t("span",{className:"text-lg font-bold text-gray-900"},"총 금액"),t("span",{className:"text-xl font-bold text-blue-600"},n.toLocaleString(),"원")),t("div",{className:"space-y-2"},o>0&&t("button",{id:"cart-modal-remove-selected-btn",className:`w-full bg-red-600 text-white py-2 px-4 rounded-md
                                 hover:bg-red-700 transition-colors text-sm`,onClick:$e},"선택한 상품 삭제 (",o,"개)"),t("div",{className:"flex gap-2"},t("button",{id:"cart-modal-clear-cart-btn",className:`flex-1 bg-gray-600 text-white py-2 px-4 rounded-md
                                 hover:bg-gray-700 transition-colors text-sm`,onClick:He},"전체 비우기"),t("button",{id:"cart-modal-checkout-btn",className:`flex-1 bg-blue-600 text-white py-2 px-4 rounded-md
                                 hover:bg-blue-700 transition-colors text-sm`,onClick:tt},"구매하기")))))))}const st=({error:e})=>t("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},t("div",{className:"text-center"},t("div",{className:"text-red-500 mb-4"},t(g,{src:"/error-large-icon.svg",alt:"오류",className:"mx-auto h-12 w-12"})),t("h1",{className:"text-xl font-bold text-gray-900 mb-2"},"상품을 찾을 수 없습니다"),t("p",{className:"text-gray-600 mb-4"},e||"요청하신 상품이 존재하지 않습니다."),t("button",{onClick:()=>window.history.back(),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 mr-2"},"이전 페이지"),t("a",{href:"/","data-link":"/",className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700"},"홈으로"))),ot=()=>{v.dispatch({type:b.HIDE_TOAST})};function nt({isVisible:e=!1,message:r="",type:a="info"}){if(!e)return"";const s=()=>{switch(a){case"success":return{bg:"bg-green-600",icon:t(g,{src:"/success-icon.svg",alt:"성공",className:"w-5 h-5"})};case"error":return{bg:"bg-red-600",icon:t(g,{src:"/error-icon.svg",alt:"오류",className:"w-5 h-5"})};case"warning":return{bg:"bg-yellow-600",icon:t(g,{src:"/warning-icon.svg",alt:"경고",className:"w-5 h-5"})};default:return{bg:"bg-blue-600",icon:t(g,{src:"/info-icon.svg",alt:"정보",className:"w-5 h-5"})}}},{bg:o,icon:n}=s();return t("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 z-50 toast-container"},t("div",{className:`${o} text-white px-4 py-3 rounded-lg shadow-lg flex items-center space-x-2 max-w-sm`},t("div",{className:"flex-shrink-0"},n),t("p",{className:"text-sm font-medium"},r),t("button",{id:"toast-close-btn",className:"flex-shrink-0 ml-2 text-white hover:text-gray-200",onClick:ot},t(g,{src:"/close-icon-white.svg",alt:"닫기",className:"w-4 h-4"}))))}function ct(){return t("h1",{className:"text-xl font-bold text-gray-900"},t("a",{href:"/","data-link":"/"},"쇼핑몰"))}function lt(){return t("footer",{className:"bg-white shadow-sm sticky top-0 z-40"},t("div",{className:"max-w-md mx-auto py-8 text-center text-gray-500"},t("p",null,"© ",new Date().getFullYear()," 항해플러스 프론트엔드 쇼핑몰")))}const it=async e=>{const a=y.getState().products.find(s=>s.productId===e);a&&ne(a,1)};function dt({productId:e,title:r,image:a,lprice:s,brand:o,onClick:n}){const c=Number(s),d=i=>{i.preventDefault(),n(e)};return t("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden product-card","data-product-id":e},t("div",{className:"aspect-square bg-gray-100 overflow-hidden cursor-pointer product-image",onClick:d},t("img",{src:a,alt:r,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-200",loading:"lazy"})),t("div",{className:"p-3"},t("div",{className:"cursor-pointer product-info mb-3",onClick:d},t("h3",{className:"text-sm font-medium text-gray-900 line-clamp-2 mb-1"},r),t("p",{className:"text-xs text-gray-500 mb-2"},o),t("p",{className:"text-lg font-bold text-gray-900"},c.toLocaleString(),"원")),t("button",{className:`w-full bg-blue-600 text-white text-sm py-2 px-3 rounded-md
                       hover:bg-blue-700 transition-colors add-to-cart-btn`,"data-product-id":e,onClick:()=>it(e)},"장바구니 담기")))}function ut(){return t("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden animate-pulse"},t("div",{className:"aspect-square bg-gray-200"}),t("div",{className:"p-3"},t("div",{className:"h-4 bg-gray-200 rounded mb-2"}),t("div",{className:"h-3 bg-gray-200 rounded w-2/3 mb-2"}),t("div",{className:"h-5 bg-gray-200 rounded w-1/2 mb-3"}),t("div",{className:"h-8 bg-gray-200 rounded"})))}const mt=async()=>{try{await F(!0)}catch(e){console.error("재시도 실패:",e)}},gt=async e=>{m.push(`/product/${e}`)};function pt({products:e=[],loading:r=!1,error:a=null,totalCount:s=0,hasMore:o=!0}){return a?t("div",{className:"text-center py-12"},t("div",{className:"text-red-500 mb-4"},t(g,{src:"/error-large-icon.svg",alt:"오류",className:"mx-auto h-12 w-12"})),t("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"오류가 발생했습니다"),t("p",{className:"text-gray-600 mb-4"},a),t("button",{id:"retry-btn",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",onClick:mt},"다시 시도")):!r&&e.length===0?t("div",{className:"text-center py-12"},t("div",{className:"text-gray-400 mb-4"},t(g,{src:"/search-large-icon.svg",alt:"검색",className:"mx-auto h-12 w-12"})),t("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"상품을 찾을 수 없습니다"),t("p",{className:"text-gray-600"},"다른 검색어를 시도해보세요.")):t("div",null,s>0&&t("div",{className:"mb-4 text-sm text-gray-600"},"총 ",t("span",{className:"font-medium text-gray-900"},s.toLocaleString(),"개"),"의 상품"),t("div",{className:"grid grid-cols-2 gap-4 mb-6",id:"products-grid"},e.map(n=>t(dt,{...n,onClick:gt})),r&&Array.from({length:6}).map(()=>t(ut,null))),r&&e.length>0&&t("div",{className:"text-center py-4"},t("div",{className:"inline-flex items-center"},t(g,{src:"/loading-icon.svg",alt:"로딩",className:"animate-spin h-5 w-5 text-blue-600 mr-2"}),t("span",{className:"text-sm text-gray-600"},"상품을 불러오는 중..."))),!o&&e.length>0&&!r&&t("div",{className:"text-center py-4 text-sm text-gray-500"},"모든 상품을 확인했습니다"),t("div",{id:"scroll-trigger",className:"h-4"}))}const yt=async e=>{const r=new URLSearchParams(e).toString();m.push(`/?${r}`)},ft=async()=>{const e=y.getState().currentProduct,r={category1:e?.category1,category2:e?.category2,currentPage:1},a=new URLSearchParams(r).toString();m.push(`/?${a}`)},ht=()=>{const e=document.getElementById("quantity-input");if(e){const r=parseInt(e.getAttribute("max"))||100;e.value=Math.min(r,parseInt(e.value)+1)}},bt=()=>{const e=document.getElementById("quantity-input");e&&(e.value=Math.max(1,parseInt(e.value)-1))},xt=()=>{const e=document.getElementById("quantity-input"),r=e?parseInt(e.value):1,s=y.getState().currentProduct;s&&(console.log("🛒 상품 상세 페이지에서 장바구니 추가:",s),ne(s,r))};function vt({product:e,relatedProducts:r=[]}){const{productId:a,title:s,image:o,lprice:n,brand:c,description:d="",rating:i=0,reviewCount:l=0,stock:u=100,category1:x,category2:N}=e,S=Number(n),C=[];return x&&C.push({name:x,category:"category1",value:x}),N&&C.push({name:N,category:"category2",value:N}),t("div",null,C.length>0&&t("nav",{className:"mb-4"},t("div",{className:"flex items-center space-x-2 text-sm text-gray-600"},t("a",{href:"/","data-link":"/",className:"hover:text-blue-600 transition-colors"},"홈"),C.map((f,L)=>[t(g,{key:`${f.category}-icon`,src:"/chevron-right-icon.svg",alt:"오른쪽 화살표",className:"w-4 h-4 text-gray-400"}),t("button",{key:`${f.category}-btn`,className:"breadcrumb-link",[`data-${f.category}`]:f.value,onClick:()=>yt(L===0?{category1:f.value}:{category1:C[L-1].value,category2:f.value})},f.name)]).flat())),t("div",{className:"bg-white rounded-lg shadow-sm mb-6"},t("div",{className:"p-4"},t("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden mb-4"},t("img",{src:o,alt:s,className:"w-full h-full object-cover product-detail-image"})),t("div",null,t("p",{className:"text-sm text-gray-600 mb-1"},c),t("h1",{className:"text-xl font-bold text-gray-900 mb-3"},s),i>0&&t("div",{className:"flex items-center mb-3"},t("div",{className:"flex items-center"},Array(5).fill(0).map((f,L)=>t(g,{key:L,src:"/star-icon.svg",alt:"별점",className:`w-4 h-4 ${L<i?"text-yellow-400":"text-gray-300"}`}))),t("span",{className:"ml-2 text-sm text-gray-600"},i,".0 (",l.toLocaleString(),"개 리뷰)")),t("div",{className:"mb-4"},t("span",{className:"text-2xl font-bold text-blue-600"},S.toLocaleString(),"원")),t("div",{className:"text-sm text-gray-600 mb-4"},"재고 ",u.toLocaleString(),"개"),d&&t("div",{className:"text-sm text-gray-700 leading-relaxed mb-6"},d))),t("div",{className:"border-t border-gray-200 p-4"},t("div",{className:"flex items-center justify-between mb-4"},t("span",{className:"text-sm font-medium text-gray-900"},"수량"),t("div",{className:"flex items-center"},t("button",{id:"quantity-decrease",className:`w-8 h-8 flex items-center justify-center border border-gray-300
                             rounded-l-md bg-gray-50 hover:bg-gray-100`,onClick:bt},t(g,{src:"/quantity-minus-icon.svg",alt:"수량 감소",className:"w-4 h-4"})),t("input",{type:"number",id:"quantity-input",value:"1",min:"1",max:u,className:`w-16 h-8 text-center text-sm border-t border-b border-gray-300
                            focus:ring-1 focus:ring-blue-500 focus:border-blue-500`}),t("button",{id:"quantity-increase",className:`w-8 h-8 flex items-center justify-center border border-gray-300
                             rounded-r-md bg-gray-50 hover:bg-gray-100`,onClick:ht},t(g,{src:"/quantity-plus-icon.svg",alt:"수량 증가",className:"w-4 h-4"})))),t("button",{id:"add-to-cart-btn","data-product-id":a,className:`w-full bg-blue-600 text-white py-3 px-4 rounded-md
                         hover:bg-blue-700 transition-colors font-medium`,onClick:xt},"장바구니 담기"))),t("div",{className:"mb-6"},t("button",{className:`block w-full text-center bg-gray-100 text-gray-700 py-3 px-4 rounded-md
                  hover:bg-gray-200 transition-colors go-to-product-list`,onClick:ft},"상품 목록으로 돌아가기")),r.length>0&&t("div",{className:"bg-white rounded-lg shadow-sm"},t("div",{className:"p-4 border-b border-gray-200"},t("h2",{className:"text-lg font-bold text-gray-900"},"관련 상품"),t("p",{className:"text-sm text-gray-600"},"같은 카테고리의 다른 상품들")),t("div",{className:"p-4"},t("div",{className:"grid grid-cols-2 gap-3 responsive-grid"},r.slice(0,20).map(f=>t("div",{key:f.productId,className:"bg-gray-50 rounded-lg p-3 related-product-card cursor-pointer","data-product-id":f.productId,onClick:()=>m.push(`/product/${f.productId}`)},t("div",{className:"aspect-square bg-white rounded-md overflow-hidden mb-2"},t("img",{src:f.image,alt:f.title,className:"w-full h-full object-cover",loading:"lazy"})),t("h3",{className:"text-sm font-medium text-gray-900 mb-1 line-clamp-2"},f.title),t("p",{className:"text-sm font-bold text-blue-600"},Number(f.lprice).toLocaleString(),"원")))))))}const wt=(e=200)=>{const r=window.pageYOffset||document.documentElement.scrollTop,a=window.innerHeight,s=document.documentElement.scrollHeight;return r+a>=s-e},Nt=e=>{let r=!1;return(...a)=>{r||(r=!0,queueMicrotask(()=>{r=!1,e(...a)}))}},St=()=>{v.dispatch({type:b.OPEN_CART_MODAL})},G=({headerLeft:e,children:r})=>{const a=w.getState(),{cartModal:s,toast:o}=v.getState(),n=a.items.length,c=t("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center"},n>99?"99+":n);return t("div",{className:"min-h-screen bg-gray-50"},t("header",{className:"bg-white shadow-sm sticky top-0 z-40"},t("div",{className:"max-w-md mx-auto px-4 py-4"},t("div",{className:"flex items-center justify-between"},e,t("div",{className:"flex items-center space-x-2"},t("button",{id:"cart-icon-btn",className:"relative p-2 text-gray-700 hover:text-gray-900 transition-colors",onClick:St},t(g,{src:"/cart-header-icon.svg",alt:"장바구니",className:"w-6 h-6"}),n>0&&c))))),t("main",{className:"max-w-md mx-auto px-4 py-4"},r),t(at,{...a,isOpen:s.isOpen}),t(nt,{...o}),t(lt,null))},le=t("h1",{className:"text-xl font-bold text-gray-900"},t("a",{href:"/","data-link":"/"},"쇼핑몰"));console.log(le);let P=!1;const ie=async()=>{if(m.route?.path==="/"&&wt(200)){const e=y.getState(),r=e.products.length<e.totalCount;if(e.loading||!r)return;try{await Re()}catch(a){console.error("무한 스크롤 로드 실패:",a)}}},Et=()=>{P||(window.addEventListener("scroll",ie),P=!0)},Ct=()=>{P&&(window.removeEventListener("scroll",ie),P=!1)},Tt=oe({onMount:()=>{Et(),Le()},onUnmount:()=>{Ct()},watches:[()=>{const{search:e,limit:r,sort:a,category1:s,category2:o}=m.query;return[e,r,a,s,o]},()=>F(!0)]},()=>{console.log("🏠 홈 페이지 로드");const e=y.getState(),{search:r,limit:a,sort:s,category1:o,category2:n}=m.query,{products:c,loading:d,error:i,totalCount:l,categories:u}=e,x={category1:o,category2:n},N=c.length<l;return t(G,{headerLeft:le},t(Ye,{searchQuery:r,category:x,sort:s,limit:a,categories:u}),t("div",{className:"mb-6"},t(pt,{products:c,loading:d,error:i,totalCount:l,hasMore:N})))}),At=oe({onMount:()=>{K(m.params.id)},watches:[()=>[m.params.id],()=>K(m.params.id)]},()=>{const{currentProduct:e,relatedProducts:r=[],error:a,loading:s}=y.getState();return t(G,{headerLeft:t("div",{className:"flex items-center space-x-3"},t("button",{onClick:()=>window.history.back(),className:"p-2 text-gray-700 hover:text-gray-900 transition-colors"},t(g,{src:"/back-icon.svg",alt:"뒤로",className:"w-6 h-6"})),t("h1",{className:"text-lg font-bold text-gray-900"},"상품 상세"))},t("div",{className:"min-h-screen bg-gray-50 p-4"},s?t("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},t("div",{className:"text-center"},t("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),t("p",{className:"text-gray-600"},"상품 정보를 불러오는 중..."))):a&&!e?t(st,{error:a}):t(vt,{product:e,relatedProducts:r})))}),Ot=()=>G({headerLeft:ct(),children:t("div",{className:"text-center my-4 py-20 shadow-md p-6 bg-white rounded-lg"},t(g,{src:"/404.svg",alt:"페이지를 찾을 수 없습니다"}),t("a",{href:"/","data-link":"/",className:"inline-block px-6 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors"},"홈으로"))});m.addRoute("/",Tt);m.addRoute("/product/:id",At);m.addRoute(".*",Ot);const R=Nt(()=>{const e=document.getElementById("root");if(!e)return;const r=m.target;be(t(r,null),e)});function _t(){y.subscribe(R),w.subscribe(R),v.subscribe(R),m.subscribe(R)}const Lt=()=>me(async()=>{const{worker:e}=await import("./browser-COnt-dxP.js");return{worker:e}},[]).then(({worker:e})=>e.start({serviceWorker:{url:`${q}mockServiceWorker.js`},onUnhandledRequest:"bypass"}));function Rt(){console.log("🚀 애플리케이션이 시작되었습니다."),console.log("✅ MSW 워커 시작 완료"),De(),console.log("✅ 장바구니 데이터 복원 완료"),_t(),console.log("✅ 렌더링 시스템 초기화 완료"),m.start(),console.log("✅ 렌더링 설정 완료"),console.log("🎉 애플리케이션 초기화 완료!")}Lt().then(Rt);
